<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dev Console - CGP</title>
    <link rel="stylesheet" href="src/css/style.css" />
    <style>
      .console-panel {
        position: fixed;
        bottom: 0;
        right: 0;
        width: 400px;
        max-height: 300px;
        background: #1f2937;
        color: #e5e7eb;
        border: 1px solid #4b5563;
        border-radius: 8px 8px 0 0;
        display: flex;
        flex-direction: column;
        font-family: monospace;
        font-size: 12px;
        z-index: 10000;
      }

      .console-header {
        background: #111827;
        padding: 8px 12px;
        border-bottom: 1px solid #4b5563;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: bold;
      }

      .console-content {
        flex: 1;
        overflow-y: auto;
        padding: 8px 12px;
      }

      .console-log {
        margin: 2px 0;
      }

      .console-info {
        color: #60a5fa;
      }

      .console-success {
        color: #10b981;
      }

      .console-error {
        color: #ef4444;
      }

      .console-warn {
        color: #f59e0b;
      }

      .buttons {
        display: flex;
        gap: 4px;
      }

      .btn-mini {
        background: #2563eb;
        color: white;
        border: none;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 11px;
      }

      .btn-mini:hover {
        background: #1d4ed8;
      }
    </style>
  </head>
  <body>
    <!-- Dev Console Panel -->
    <div class="console-panel">
      <div class="console-header">
        <span>üñ•Ô∏è Dev Console</span>
        <div class="buttons">
          <button class="btn-mini" onclick="clearConsole()">Clear</button>
          <button class="btn-mini" onclick="loadTestData()">Load Test Data</button>
          <button class="btn-mini" onclick="clearTestData()">Clear Data</button>
          <button class="btn-mini" onclick="toggleConsole()">‚ñº</button>
        </div>
      </div>
      <div class="console-content" id="consoleOutput"></div>
    </div>

    <script type="module">
      // Hijack console methods
      const consoleOutput = document.getElementById('consoleOutput');
      const originalLog = console.log;
      const originalWarn = console.warn;
      const originalError = console.error;
      const originalInfo = console.info;

      function addLog(message, className) {
        const line = document.createElement('div');
        line.className = `console-log ${className}`;
        line.textContent = message;
        consoleOutput.appendChild(line);
        consoleOutput.scrollTop = consoleOutput.scrollHeight;
      }

      console.log = function (...args) {
        originalLog(...args);
        addLog(args.join(' '), 'console-info');
      };

      console.info = function (...args) {
        originalInfo(...args);
        addLog(args.join(' '), 'console-info');
      };

      console.warn = function (...args) {
        originalWarn(...args);
        addLog(args.join(' '), 'console-warn');
      };

      console.error = function (...args) {
        originalError(...args);
        addLog(args.join(' '), 'console-error');
      };

      // Success logging
      window.logSuccess = function (message) {
        addLog('‚úì ' + message, 'console-success');
      };

      // Expose global functions
      window.clearConsole = function () {
        consoleOutput.innerHTML = '';
      };

      window.toggleConsole = function () {
        const panel = document.querySelector('.console-panel');
        const height = panel.style.maxHeight;
        panel.style.maxHeight = height === '0px' ? '300px' : '0px';
        panel.style.overflow = height === '0px' ? 'hidden' : 'auto';
      };

      window.loadTestData = async function () {
        try {
          console.log('Loading test data...');
          const { generateTestData } = await import('./src/js/testData.js');
          generateTestData();
          console.log('‚úì Test data loaded successfully');
          console.log('‚Üí Reload the page to see the data in the dashboard');
        } catch (error) {
          console.error('Failed to load test data:', error);
        }
      };

      window.clearTestData = function () {
        try {
          if (confirm('üöÆ Tem certeza que deseja deletar TODOS os dados? Esta a√ß√£o n√£o pode ser desfeita!')) {
            localStorage.removeItem('cgp:data:v1');
            console.log('‚úì All data cleared successfully');
            console.log('‚Üí Reload the page to apply changes');
          } else {
            console.log('Cancelled: Data not cleared');
          }
        } catch (error) {
          console.error('Failed to clear data:', error);
        }
      };

      // Initial message
      console.log('üñ•Ô∏è CGP Developer Console - Ready');
      console.log('Commands:');
      console.log('  loadTestData() - Load sample data');
      console.log('  clearTestData() - Clear all data');
      console.log('  clearConsole() - Clear console');
    </script>
  </body>
</html>
